"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[540],{235:(e,t,r)=>{r.d(t,{J:()=>n});var o=r(5155);r(2115);var s=r(489),a=r(5016);function n(e){let{className:t,...r}=e;return(0,o.jsx)(s.b,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},3209:(e,t,r)=>{r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>a,aR:()=>n});var o=r(5155);r(2115);var s=r(5016);function a(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},5016:(e,t,r)=>{r.d(t,{cn:()=>a});var o=r(2821),s=r(5889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,o.$)(t))}},6170:(e,t,r)=>{r.d(t,{p:()=>a});var o=r(5155);r(2115);var s=r(5016);function a(e){let{className:t,type:r,...a}=e;return(0,o.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}},7003:(e,t,r)=>{r.d(t,{$:()=>l});var o=r(5155);r(2115);var s=r(2467),a=r(3101),n=r(5016);let i=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:a,asChild:l=!1,...d}=e,u=l?s.DX:"button";return(0,o.jsx)(u,{"data-slot":"button",className:(0,n.cn)(i({variant:r,size:a,className:t})),...d})}},7621:(e,t,r)=>{r.d(t,{Eo:()=>i,R2:()=>n,fb:()=>l,tW:()=>d});var o=r(5125);let s="http://localhost:8080";console.log("[v0] API Base URL:",s);let a=o.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{var t;let r=e.headers.Authorization,o=r&&"string"==typeof r?r.substring(0,27)+"...":r?"Present (non-string)":"None";console.log("[v0] Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),url:e.url,fullURL:"".concat(e.baseURL).concat(e.url),data:e.data,authHeader:o});{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>(console.log("[v0] Response:",{status:e.status,data:e.data}),e),e=>{var t,r,o,s,a,n,i,l,d;return console.error("[v0] Error Response:",{status:null==(t=e.response)?void 0:t.status,statusText:null==(r=e.response)?void 0:r.statusText,data:null==(o=e.response)?void 0:o.data,headers:null==(s=e.response)?void 0:s.headers,message:e.message,requestURL:null==(a=e.config)?void 0:a.url,requestMethod:null==(n=e.config)?void 0:n.method,requestAuthHeader:(null==(l=e.config)||null==(i=l.headers)?void 0:i.Authorization)?"Present":"Missing"}),(null==(d=e.response)?void 0:d.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});let n={register:e=>a.post("/api/auth/register",e),login:e=>a.post("/api/auth/login",e)},i={getUser:e=>a.get("/api/users/".concat(e)),getUserWithToken:(e,t)=>(console.log("[v0] getUserWithToken called with:",{userId:e,tokenLength:null==t?void 0:t.length,tokenPreview:(null==t?void 0:t.substring(0,20))+"..."}),a.get("/api/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})),train:(e,t)=>a.post("/api/users/".concat(e,"/train"),t),rest:(e,t)=>a.post("/api/users/".concat(e,"/rest"),t),purchase:(e,t)=>a.post("/api/users/".concat(e,"/purchase"),t),addSession:(e,t)=>a.post("/api/users/".concat(e,"/sessions"),t),getSessions:e=>a.get("/api/users/".concat(e,"/sessions"))},l={list:()=>a.get("/api/exercises"),create:e=>a.post("/api/exercises",e)},d={list:()=>a.get("/api/routines"),create:e=>a.post("/api/routines",e)}},8171:(e,t,r)=>{r.d(t,{dj:()=>c});var o=r(2115);let s=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function c(){let[e,t]=o.useState(l);return o.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9730:(e,t,r)=>{r.d(t,{A:()=>l,AuthProvider:()=>i});var o=r(5155),s=r(2115),a=r(7621);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[l,d]=(0,s.useState)(null),[u,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(d(e),i(JSON.parse(t))),c(!1)},[]);let g=async(e,t)=>{try{let{token:r,id:o}=(await a.R2.login({username:e,password:t})).data;localStorage.setItem("token",r),d(r);let s=(await a.Eo.getUserWithToken(o,r)).data;localStorage.setItem("user",JSON.stringify(s)),i(s)}catch(e){var r,o;throw Error((null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"Error al iniciar sesi\xf3n")}},p=async(e,t,r)=>{try{console.log("=== INICIO REGISTRO ==="),console.log("Datos:",{name:e,username:t});let o=await a.R2.register({name:e,username:t,password:r});console.log("Respuesta recibida:",o.data);let{token:s,id:n}=o.data;console.log("Token y ID extra\xeddos:",{id:n,tokenLength:null==s?void 0:s.length}),localStorage.setItem("token",s),console.log("Token guardado en localStorage"),d(s),console.log("Obteniendo datos del usuario...");let l=await a.Eo.getUserWithToken(n,s);console.log("Datos del usuario recibidos:",l.data);let u=l.data;localStorage.setItem("user",JSON.stringify(u)),i(u),console.log("=== REGISTRO EXITOSO ===")}catch(e){var o,s,n,l;throw console.error("=== ERROR EN REGISTRO ==="),console.error("Error completo:",e),console.error("Mensaje:",e.message),console.error("Respuesta:",null==(o=e.response)?void 0:o.data),console.error("Status:",null==(s=e.response)?void 0:s.status),Error((null==(l=e.response)||null==(n=l.data)?void 0:n.message)||e.message||"Error desconocido al registrarse")}},v=async()=>{if(r)try{let e=(await a.Eo.getUser(r.id)).data;localStorage.setItem("user",JSON.stringify(e)),i(e)}catch(e){console.error("Error al actualizar usuario:",e)}};return(0,o.jsx)(n.Provider,{value:{user:r,token:l,login:g,register:p,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),i(null)},refreshUser:v,isLoading:u},children:t})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}}}]);