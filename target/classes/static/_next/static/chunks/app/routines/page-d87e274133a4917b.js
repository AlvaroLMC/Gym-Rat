(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{5999:(e,s,a)=>{Promise.resolve().then(a.bind(a,9932))},9932:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var r=a(5155),i=a(2115),t=a(63),n=a(9730),c=a(8413),l=a(3209),d=a(7812),o=a(5159);function u(e){let{name:s,exercises:a}=e;return(0,r.jsxs)(l.Zp,{className:"hover:shadow-lg transition-all hover:scale-105 border-2",children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-primary"}),s]})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground font-medium",children:[a.length," ejercicio",1!==a.length?"s":""]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(e=>(0,r.jsx)(d.E,{variant:"outline",children:e.name},e.id))})]})})]})}var m=a(7003),x=a(6170),h=a(235),p=a(8162),j=a(5917),g=a(5016);function f(e){let{className:s,...a}=e;return(0,r.jsx)(p.bL,{"data-slot":"checkbox",className:(0,g.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(p.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(j.A,{className:"size-3.5"})})})}var v=a(4679),N=a(7621),b=a(8171),y=a(5299),w=a(6191);function k(){let e=(0,t.useRouter)(),{user:s,isLoading:a}=(0,n.A)(),{toast:d}=(0,b.dj)(),[p,j]=(0,i.useState)([]),[g,k]=(0,i.useState)([]),[C,E]=(0,i.useState)(!0),[R,A]=(0,i.useState)(!1),[S,z]=(0,i.useState)(""),[_,O]=(0,i.useState)([]);(0,i.useEffect)(()=>{a||s||e.push("/login")},[s,a,e]),(0,i.useEffect)(()=>{P()},[]);let P=async()=>{try{let[e,s]=await Promise.all([N.tW.list(),N.fb.list()]);j(e.data),k(s.data)}catch(e){d({title:"Error",description:"No se pudieron cargar los datos",variant:"destructive"})}finally{E(!1)}},W=async e=>{if(e.preventDefault(),!S||0===_.length)return void d({title:"Error",description:"Debes agregar un nombre y al menos un ejercicio",variant:"destructive"});try{await N.tW.create({name:S,exercises:_}),d({title:"\xa1Rutina creada!",description:"".concat(S," ha sido creada exitosamente")}),A(!1),z(""),O([]),P()}catch(e){var s,a;d({title:"Error",description:(null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Error al crear rutina",variant:"destructive"})}};return a||!s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(y.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background",children:[(0,r.jsx)(c.F,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Rutinas"}),(0,r.jsx)("p",{className:"text-muted-foreground text-lg",children:"Organiza tus ejercicios en rutinas personalizadas"})]}),(0,r.jsxs)(v.lG,{open:R,onOpenChange:A,children:[(0,r.jsx)(v.zM,{asChild:!0,children:(0,r.jsxs)(m.$,{size:"lg",className:"gap-2",children:[(0,r.jsx)(w.A,{className:"h-5 w-5"}),"Nueva Rutina"]})}),(0,r.jsxs)(v.Cf,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(v.c7,{children:[(0,r.jsx)(v.L3,{children:"Crear Nueva Rutina"}),(0,r.jsx)(v.rr,{children:"Selecciona los ejercicios que formar\xe1n parte de tu rutina"})]}),(0,r.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.J,{htmlFor:"routineName",children:"Nombre de la rutina"}),(0,r.jsx)(x.p,{id:"routineName",value:S,onChange:e=>z(e.target.value),placeholder:"Ej: Rutina de fuerza",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(h.J,{children:"Ejercicios"}),g.length>0?(0,r.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-3",children:g.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(f,{id:"exercise-".concat(e.id),checked:_.includes(e.id),onCheckedChange:()=>{var s;return s=e.id,void O(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])}}),(0,r.jsx)("label",{htmlFor:"exercise-".concat(e.id),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.name})]},e.id))}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No hay ejercicios disponibles. Crea algunos primero."})]}),(0,r.jsx)(m.$,{type:"submit",className:"w-full",disabled:0===g.length,children:"Crear Rutina"})]})]})]})]}),C?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(y.A,{className:"h-8 w-8 animate-spin text-primary"})}):p.length>0?(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(e=>(0,r.jsx)(u,{...e},e.id))}):(0,r.jsx)(l.Zp,{className:"border-2",children:(0,r.jsxs)(l.Wu,{className:"py-12 text-center",children:[(0,r.jsx)(o.A,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"No hay rutinas disponibles"}),(0,r.jsxs)(m.$,{onClick:()=>A(!0),disabled:0===g.length,children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Crear Primera Rutina"]}),0===g.length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Primero necesitas crear algunos ejercicios"})]})})]})]})}}},e=>{e.O(0,[809,58,327,430,374,540,638,441,255,358],()=>e(e.s=5999)),_N_E=e.O()}]);